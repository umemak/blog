<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1">
<title>Raspberry pi4 で expo を動かす - umemak</title>
<style type=text/css>img.wp-smiley,img.emoji{display:inline!important;border:none!important;box-shadow:none!important;height:1em!important;width:1em!important;margin:0 .07em!important;vertical-align:-.1em!important;background:0 0!important;padding:0!important}</style>
<link rel=stylesheet href=https://umemak.github.io/blog/css/style.css type=text/css media=all>
<link rel=stylesheet href=https://umemak.github.io/blog/css/custom.css type=text/css media=all>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-151652940-1','auto'),ga('send','pageview'))</script>
</head>
<body class=two-column>
<a href=#content>Skip to content</a>
<div class=wrapper>
<header role=banner class="banner widgets columns-1">
<a href=/ rel=home>
<h1 class=site>umemak</h1>
<p></p>
</a>
<nav role=navigation aria-label="Primary Navigation">
<ul class=menu>
<li class=menu-item><a class=menu__link href=/blog/posts/>POSTS</a></li>
<li class=menu-item><a class=menu__link href=/blog/tags/>TAGS</a></li>
</ul>
<select onchange="location.href=value"><option value=/blog/posts/ class="menu-item menu-item-type-custom menu-item-object-custom">POSTS</option><option value=/blog/tags/ class="menu-item menu-item-type-custom menu-item-object-custom">TAGS</option></select>
</nav>
</header>
<br>
<div style=width:100%;max-height:100px;text-align:center>
</div>
<div class=breadcrumbs>
</div>
<div id=content class=content>
<main role=main>
<article role=article class="post type-post format-standard hentry">
<header class=post-header>
<h1>Raspberry pi4 で expo を動かす</h1>
<div class=post-details>
<a rel=bookmark>
<time datetime=2020-07-22T722:120:06>2020-07-22</time>
</a>
<span style=float:right>
<div id=fb-root style=height:100%></div>
<script async defer crossorigin=anonymous src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2"></script>
<div class=fb-share-button data-href=https://umemak.github.io/blog/posts/2020/07/22_raspi_expo/ data-layout=button_count data-size=small>
<a target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fumemak.github.io%2fblog%2fposts%2f2020%2f07%2f22_raspi_expo%2f" class=fb-xfbml-parse-ignore>Share</a>
</div>
&nbsp;
<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Raspberry pi4 で expo を動かす" data-url=https://umemak.github.io/blog/posts/2020/07/22_raspi_expo/ data-show-count=false>Tweet</a>
<script async src=https://platform.twitter.com/widgets.js></script>
&nbsp;
</span>
</div>
</header>
<div class=post-content>
<p>WSLでいろいろ試してみたものの、ポート関連のエラーで動かないので、Raspberry piで試してみた。</p>
<h2 id=rubyインストール>Rubyインストール</h2>
<ul>
<li>Homebrewインストールしようとしたときに、Rubyがないエラーで先に進まなくなってしまったので先にインストールしておく。</li>
<li><code>rbenv</code>を使ってみる。</li>
<li>途中でパッケージが足りないエラーが出るので、<code>libssl-dev</code>と<code>libreadline-dev</code>を入れる。</li>
</ul>
<pre tabindex=0><code>$ sudo apt-get install -y libssl-dev libreadline-dev
$ git clone https://github.com/rbenv/rbenv.git ~/.rbenv
$ echo 'export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;' &gt;&gt; ~/.bashrc
$ echo 'eval &quot;$(rbenv init -)&quot;' &gt;&gt; ~/.bashrc
$ git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
$ rbenv rehash
$ rbenv install --list
$ rbenv install 2.6.6
$ rbenv global 2.6.6
$ rbenv rehash
$ ruby --version
ruby 2.6.6p146 (2020-03-31 revision 67876) [aarch64-linux]
</code></pre><h2 id=homebrewインストール>Homebrewインストール</h2>
<ul>
<li>手順は先日<a href=../20_wsl_brew>WSLにインストール</a>したときと同様。</li>
</ul>
<pre tabindex=0><code>$ /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot;
$ sudo apt-get install build-essential
$ echo 'eval $(/home/linuxbrew/.linuxbrew/bin/brew shellenv)' &gt;&gt; /home/pi/.profile
$ eval $(/home/linuxbrew/.linuxbrew/bin/brew shellenv)
$ brew --version
Homebrew 2.4.8
Homebrew/linuxbrew-core (git revision 39fddf7; last commit 2020-07-21)
</code></pre><h2 id=nodebrewインストール>Nodebrewインストール</h2>
<ul>
<li>これも先日と同様。</li>
</ul>
<pre tabindex=0><code>$ brew install nodebrew
$ mkdir -p ~/.nodebrew/src
$ nodebrew install stable
$ nodebrew ls
$ nodebrew use v14.6.0
$ vi ~/.profile
export PATH=$HOME/.nodebrew/current/bin:$PATH
$ source ~/.profile
$ node -v
v14.6.0
</code></pre><h2 id=expoインストール>Expoインストール</h2>
<ul>
<li>グローバルに<code>expo-cli</code>をインストールしないで、init後にaddしている。</li>
<li>テンプレートは<code>tabs (TypeScript)</code>を選択した。</li>
</ul>
<pre tabindex=0><code>$ cd workspace/
$ npx expo-cli init expotest
$ cd expotest/
$ npm install --save-dev expo-cli
</code></pre><ul>
<li><code>npm start</code>後、しばらくすると以下のエラーが出るので、上限を上げる。</li>
</ul>
<pre tabindex=0><code>Error: ENOSPC: System limit for number of file watchers reached, watch '/home/pi/workspace/expotest/node_modules/metro/node_modules/string-width/node_modules/ansi-regex'
</code></pre><pre tabindex=0><code>$ cat /proc/sys/fs/inotify/max_user_watches
8192
$ sudo su
# echo fs.inotify.max_user_watches= 65536 | tee -a /etc/sysctl.conf
fs.inotify.max_user_watches= 65536
# cat /proc/sys/fs/inotify/max_user_watches
8192
# sysctl -p
fs.inotify.max_user_watches = 65536
# cat /proc/sys/fs/inotify/max_user_watches
65536
# exit
</code></pre><h2 id=expo起動>Expo起動</h2>
<pre tabindex=0><code>$ npm start
</code></pre><ul>
<li>表示されたQRコードを、iOSやAndroidのアプリで開くと表示される。</li>
<li>初回はJavaScriptのビルドが走る（アプリの画面下部に進捗が表示される）。</li>
<li>それ以降はソースを変更するとほぼリアルタイムで反映される。</li>
</ul>
</div>
<footer class=post-footer>
<span class=post-tags>
<a href=https://umemak.github.io/tags/expo rel=tag>expo</a>&emsp;
<a href=https://umemak.github.io/tags/raspberry_pi rel=tag>raspberry_pi</a>&emsp;
</span>
</footer>
<table cellspacing=15 style=width:100%;border:none>
<tr>
<td style=text-align:center;border:none;padding:0>
</td>
<td style=text-align:center;border:none;padding:0>
</td>
</tr>
</table>
</article>
<nav class="navigation post-navigation" role=navigation>
<div class=nav-links>
<div class=nav-previous>
<a class=previous href=https://umemak.github.io/blog/posts/2020/07/20_wsl_brew/> WSL2にbrewをつかってnodejsのインストールをする</a>
</div>
<div class=nav-next>
<a class=next href=https://umemak.github.io/blog/posts/2020/08/01_hello_rust/> Rust入門</a>
</div>
</div>
</nav>
<section>
</section>
</main>
<div class="sidebar1 widgets columns-1">
<aside>
</aside>
<aside class="widget widget_tag_cloud">
<h2>タグ</h2>
<div class=tagcloud><a class=tag-cloud-link href=/blog/tags/5g title=5g style=font-size:12pt>5g</a>&emsp;<a class=tag-cloud-link href=/blog/tags/actions title=actions style=font-size:12pt>actions</a>&emsp;<a class=tag-cloud-link href=/blog/tags/adventcalendar2021 title=adventcalendar2021 style=font-size:12pt>AdventCalendar2021</a>&emsp;<a class=tag-cloud-link href=/blog/tags/aws title=aws style=font-size:12pt>aws</a>&emsp;<a class=tag-cloud-link href=/blog/tags/azure title=azure style=font-size:12pt>Azure</a>&emsp;<a class=tag-cloud-link href=/blog/tags/baseball title=baseball style=font-size:12pt>baseball</a>&emsp;<a class=tag-cloud-link href=/blog/tags/blog title=blog style=font-size:12pt>blog</a>&emsp;<a class=tag-cloud-link href=/blog/tags/book title=book style=font-size:12pt>book</a>&emsp;<a class=tag-cloud-link href=/blog/tags/c101pa title=c101pa style=font-size:12pt>C101PA</a>&emsp;<a class=tag-cloud-link href=/blog/tags/centos title=centos style=font-size:12pt>centos</a>&emsp;<a class=tag-cloud-link href=/blog/tags/centos6 title=centos6 style=font-size:12pt>centos6</a>&emsp;<a class=tag-cloud-link href=/blog/tags/chromebook title=chromebook style=font-size:12pt>chromebook</a>&emsp;<a class=tag-cloud-link href=/blog/tags/ci/cd title=ci/cd style=font-size:12pt>ci/cd</a>&emsp;<a class=tag-cloud-link href=/blog/tags/cms title=cms style=font-size:12pt>cms</a>&emsp;<a class=tag-cloud-link href=/blog/tags/container title=container style=font-size:12pt>container</a>&emsp;<a class=tag-cloud-link href=/blog/tags/ddd title=ddd style=font-size:12pt>ddd</a>&emsp;<a class=tag-cloud-link href=/blog/tags/dena title=dena style=font-size:12pt>DeNA</a>&emsp;<a class=tag-cloud-link href=/blog/tags/deno title=deno style=font-size:12pt>deno</a>&emsp;<a class=tag-cloud-link href=/blog/tags/device title=device style=font-size:12pt>device</a>&emsp;<a class=tag-cloud-link href=/blog/tags/devops title=devops style=font-size:12pt>DevOps</a>&emsp;<a class=tag-cloud-link href=/blog/tags/docker title=docker style=font-size:12pt>docker</a>&emsp;<a class=tag-cloud-link href=/blog/tags/docomo title=docomo style=font-size:12pt>docomo</a>&emsp;<a class=tag-cloud-link href=/blog/tags/event title=event style=font-size:12pt>event</a>&emsp;<a class=tag-cloud-link href=/blog/tags/expo title=expo style=font-size:12pt>expo</a>&emsp;<a class=tag-cloud-link href=/blog/tags/fireabse title=fireabse style=font-size:12pt>fireabse</a>&emsp;<a class=tag-cloud-link href=/blog/tags/firebase title=firebase style=font-size:12pt>firebase</a>&emsp;<a class=tag-cloud-link href=/blog/tags/flutter title=flutter style=font-size:12pt>flutter</a>&emsp;<a class=tag-cloud-link href=/blog/tags/freee title=freee style=font-size:12pt>freee</a>&emsp;<a class=tag-cloud-link href=/blog/tags/gas title=gas style=font-size:12pt>gas</a>&emsp;<a class=tag-cloud-link href=/blog/tags/gatsbyjs title=gatsbyjs style=font-size:12pt>gatsbyjs</a>&emsp;<a class=tag-cloud-link href=/blog/tags/gcp title=gcp style=font-size:12pt>GCP</a>&emsp;<a class=tag-cloud-link href=/blog/tags/git title=git style=font-size:12pt>git</a>&emsp;<a class=tag-cloud-link href=/blog/tags/gitea title=gitea style=font-size:12pt>gitea</a>&emsp;<a class=tag-cloud-link href=/blog/tags/github title=github style=font-size:12pt>github</a>&emsp;<a class=tag-cloud-link href=/blog/tags/gitpod title=gitpod style=font-size:12pt>gitpod</a>&emsp;<a class=tag-cloud-link href=/blog/tags/go title=go style=font-size:12pt>go</a>&emsp;<a class=tag-cloud-link href=/blog/tags/golang title=golang style=font-size:12pt>golang</a>&emsp;<a class=tag-cloud-link href=/blog/tags/hugo title=hugo style=font-size:12pt>hugo</a>&emsp;<a class=tag-cloud-link href=/blog/tags/iij title=iij style=font-size:12pt>iij</a>&emsp;<a class=tag-cloud-link href=/blog/tags/k8s title=k8s style=font-size:12pt>k8s</a>&emsp;<a class=tag-cloud-link href=/blog/tags/kubernetes title=kubernetes style=font-size:12pt>kubernetes</a>&emsp;<a class=tag-cloud-link href=/blog/tags/line title=line style=font-size:12pt>line</a>&emsp;<a class=tag-cloud-link href=/blog/tags/linux title=linux style=font-size:12pt>linux</a>&emsp;<a class=tag-cloud-link href=/blog/tags/mac title=mac style=font-size:12pt>mac</a>&emsp;<a class=tag-cloud-link href=/blog/tags/mattermost title=mattermost style=font-size:12pt>mattermost</a>&emsp;<a class=tag-cloud-link href=/blog/tags/minikube title=minikube style=font-size:12pt>minikube</a>&emsp;<a class=tag-cloud-link href=/blog/tags/mysql title=mysql style=font-size:12pt>mysql</a>&emsp;<a class=tag-cloud-link href=/blog/tags/nextjs title=nextjs style=font-size:12pt>nextjs</a>&emsp;<a class=tag-cloud-link href=/blog/tags/nginx title=nginx style=font-size:12pt>nginx</a>&emsp;<a class=tag-cloud-link href=/blog/tags/node title=node style=font-size:12pt>node</a>&emsp;<a class=tag-cloud-link href=/blog/tags/ntt title=ntt style=font-size:12pt>ntt</a>&emsp;<a class=tag-cloud-link href=/blog/tags/oci title=oci style=font-size:12pt>oci</a>&emsp;<a class=tag-cloud-link href=/blog/tags/oracle title=oracle style=font-size:12pt>oracle</a>&emsp;<a class=tag-cloud-link href=/blog/tags/pgsql title=pgsql style=font-size:12pt>pgsql</a>&emsp;<a class=tag-cloud-link href=/blog/tags/pixel4 title=pixel4 style=font-size:12pt>pixel4</a>&emsp;<a class=tag-cloud-link href=/blog/tags/programmning title=programmning style=font-size:12pt>programmning</a>&emsp;<a class=tag-cloud-link href=/blog/tags/pwa title=pwa style=font-size:12pt>pwa</a>&emsp;<a class=tag-cloud-link href=/blog/tags/python title=python style=font-size:12pt>python</a>&emsp;<a class=tag-cloud-link href=/blog/tags/rails title=rails style=font-size:12pt>rails</a>&emsp;<a class=tag-cloud-link href=/blog/tags/raspberry-pi title=raspberry-pi style=font-size:12pt>raspberry-pi</a>&emsp;<a class=tag-cloud-link href=/blog/tags/raspberry_pi title=raspberry_pi style=font-size:12pt>raspberry_pi</a>&emsp;<a class=tag-cloud-link href=/blog/tags/rss title=rss style=font-size:12pt>rss</a>&emsp;<a class=tag-cloud-link href=/blog/tags/ruby title=ruby style=font-size:12pt>ruby</a>&emsp;<a class=tag-cloud-link href=/blog/tags/rust title=rust style=font-size:12pt>rust</a>&emsp;<a class=tag-cloud-link href=/blog/tags/serverless title=serverless style=font-size:12pt>serverless</a>&emsp;<a class=tag-cloud-link href=/blog/tags/surface title=surface style=font-size:12pt>Surface</a>&emsp;<a class=tag-cloud-link href=/blog/tags/test title=test style=font-size:12pt>test</a>&emsp;<a class=tag-cloud-link href=/blog/tags/vmware title=vmware style=font-size:12pt>vmware</a>&emsp;<a class=tag-cloud-link href=/blog/tags/vscode title=vscode style=font-size:12pt>vscode</a>&emsp;<a class=tag-cloud-link href=/blog/tags/wikijs title=wikijs style=font-size:12pt>wikijs</a>&emsp;<a class=tag-cloud-link href=/blog/tags/win10 title=win10 style=font-size:12pt>win10</a>&emsp;<a class=tag-cloud-link href=/blog/tags/windows title=windows style=font-size:12pt>windows</a>&emsp;<a class=tag-cloud-link href=/blog/tags/wsl title=wsl style=font-size:12pt>wsl</a>&emsp;<a class=tag-cloud-link href=/blog/tags/yahoo title=yahoo style=font-size:12pt>yahoo</a>&emsp;
</div>
</aside>
<aside class="widget widget_recent_entries">
<h2>最近の投稿</h2>
<ul>
<li>
<a href=/blog/posts/2021/12/19_ac/>データ構造の見直し</a>
</li>
<li>
<a href=/blog/posts/2021/12/18_ac/>エントリー機能追加</a>
</li>
<li>
<a href=/blog/posts/2021/12/17_ac/>データ更新機能</a>
</li>
<li>
<a href=/blog/posts/2021/12/16_ac/>作成したレコードのID取得</a>
</li>
<li>
<a href=/blog/posts/2021/12/15_ac/>CORS続き</a>
</li>
<li>
<a href=/blog/posts/2021/12/14_ac/>データ登録やってみる</a>
</li>
<li>
<a href=/blog/posts/2021/12/13_ac/>schemaファイルを作る</a>
</li>
<li>
<a href=/blog/posts/2021/12/12_ac/>データ構造を考える</a>
</li>
<li>
<a href=/blog/posts/2021/12/11_ac/>authを追加</a>
</li>
<li>
<a href=/blog/posts/2021/12/10_ac/>画面を作る</a>
</li>
</ul>
</aside>
</div>
</div>
</div>
<footer role=contentinfo class="document-footer contentinfo widgets columns-1">
<aside class="widget widget_text">
<div class=textwidget>
<p>© umemak / Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme <a href=https://github.com/tosi29/inkblotty target=_blank>Inkblotty</a></p>
</div>
</aside>
</footer>
</div>
</body>
</html>