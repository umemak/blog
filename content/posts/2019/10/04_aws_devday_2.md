---
title: "AWS DevDay Tokyo 2019 DAY2"
date: "2019-10-04"
tags: ["aws", "event"]
---

二日目（最終日）です。
今日もサーバーレス系中心に見ていきたいと思います。

## 10:00〜10:45 オープンソースコミュニティで加速するサーバーレスの未来
* クラウドの世界の中にいながら、オープンソースコミュニティに参加することの意味と楽しさ
* Lambdaの問題（当時）
  - マネコンにソースを直接アップロードするのでバージョン管理どうする
  - CI/CDどうする
* それを解決できるServerless Frameworkの登場
* Serverless Setp Functions
* OSS活動を継続的に続けるモチベーション
  - スキルのあるプログラマからのレビューを受けられる。スキルアップできる。
  - 遠くの国のあったことのない人から感謝される喜び
  - 自分の書いたコードがたとえ1行だとしても世界中の人に使われて、どこかの誰かの役に立っているかもしれない
* OSS活動を継続させるには
  - 誰からも反応なく飽きてしまう、地味
  - スターが1000以上、関わっている人が複数いる、help-wantedタグがついているissueがあるプロジェクトに継続的にプルリクを送り続ける
  - 先送りにされている問題を潰していく人の存在は重要
  - ぷる市区を出し続けたプロダクトのプラグインなど付随のOSSを出してみる
* オープンソースの未来とサーバーレス
  - Cloud2.0
    - 究極のサバーレスアプリケーションには全くコードがない
    - サーバーレスの狙いはよりコードを少なくクラウドのサービスをできる限り使うこと
    - フルマネージドサービスをうまく利用することで責務の多くをクラウドに任せ、ビジネスバリューを出すための仕事に集中すること
  - Cloud2.0の時代でも、コードを書くということが本質的になくなっていくことはない
  - 新しいものが出るということは新たな問題も発生するということ。問題とはチャンスであるということ。

## 11:00〜11:45 Chaos Engineering ～入門と実例～
### Chaos Engineering の進化と今
* 障害を避ける最も良い方法は継続的に障害を起こさせること（Netflix TechBlog 2010.12.16）
  - Chaos Monkey: インスタンスをランダムに停止
* Failure Injection Testiong(2014.10)
* Chaos Monkey, Simian Arm
  - 影響範囲の限定が難しい
* Chaos Kong(2015.9)
* PRINCIPLES OF CHAOS ENGINEEERING
  - カオスエンジニアリングとは、「対象とするシステムが本願環境における不安定な状況を耐えることができる」という自信を構築するために当該システムにおいて実施する
* ChAP: CHaos Automation Platform(2017.7)
* Aitomaiong chaos experiments in production(2019.5)
* Gremlin Inc
  - 仕組みやツールを提供する企業
* ChaosTOolkit
  - OSS
* Chaos Testに取り組むなら、最低限の可用性設計はできていることが望ましい。

### 後半
* Chaosconf振り返り
* Our 4 Setp Aproach
  - 定常状態
  - 仮説設定
  - 故障発生
  - 仮説反証
* Our Next Aproach
  - 影響の最小化

## 12:00〜12:45 よくある課題を一気に解説　御社の技術レベルがアップする 2019 秋期講習
* コンテナのCI/CDちゃんとしたい
  - CI/CDはアプリケーション開発を効率化する仕組みや開発手法のことで、単一の技術を指すものではない
  - 手作業でのデプロイと決別する
  - リビジョンとデプロイメントを連動させることを考える
  - マネージドサービスを中心にパイプラインを構成する

* ログ設計どうすればいい
  - ログの種類と目的を考える
    - アプリログ、ミドルウェアログ、OSログ
    - 用途にあったものが出力されているか確認する
  - ログの設計をする
    - ログレベル
    - 出力先
      - 運用者がすぐに見つけられるところに集約
    - 権限
      - 適切なログの権限あのか。見れる・見れない、変更できるできない
  - アプリケーションにあったフォーマットを考える
    - デフォルトでは出力されない項目もある

* いい感じの機械学習基盤を作りたい
  - できる限りマネージドサービスを使えないか考えよう
    - 自分でモデルを作らなくても学習済みのモデルをAPIで簡単に使える（AIサービス）
    - サービスの利用SageMaker（MLサービス）
    - フレームワーク＆プラットフォーム
  - どこまで自由度を求めるか考えよう
    - データだけ準備（AutoML、SageMaker）
    - モデルも自分で書く（SageMaker）
    - コンテナ持ち込み（SageMaker）
  - ワークフローの構築と自動化を考えよう
    - StepFunctions

* セキュリティ自動化
  - セキュリティ要件なサービス運営者自身から出てくるもの
    - 何をすべきかは各社、各ビジネスによって異なる
  - まずマネージドサービスを使おう
    - 自分の責任範囲を小さくする（責任共有モデル）
    - セキュリティ系マネージドサビスで低コストに高機能を得る
  - キャッチすべきアラートやイベントを決めよう
    - 何を検知できるのか、発生時にどう影響があるのか
  - イベントに対するレスポンスを考えよう
    - Lambda, StepFunction

## 13:00〜13:45 Serverless Elixir with AWS Lambda
* よく使われるマネージドサービス
  - Lambda, API Gateway, DynamoDB, ALB
* 長所
  - サーバー運用費用が安い
  - 運用オペレーションが不要
  - 自動スケールでトラフィックスパイクに強い
* 短所
  - デプロイメントが複雑
    - ローカルとの差分、テスト
  - 対応ライブラリが少ない
    - Railsとか
  - データベースによる制約
    - 高トラフィック時のコネクション数上限
  - 様々な制約
    - 関数の同時実行数
    - 関数の最大処理時間/タイムアウト時間
* Lambdaのアーキテクチャ
  - Firecrackerベース
* Custom Runtime
  - Lumbdaで任意の言語のランタイムを実行させる機能
  - 実行に必要なもの
    - bootstrap: Lambda起動時に実行される
    - handler: 呼び出しごとに実行される
  * Elixir
    - ErlangVM上で動作する
    - 並行プログラミングしやすい
  * bootstrapでErlangVMを起動する
* Serverless Elixorアプリの運用
  - デプロイ
    - CFn
    - Serverles Framework
    - SAM
  - 利用するツール
    - DOcker
      - AmazonLinuxイメージを使って動作確認することでLambdaと同じ動きになる
    - mix(Elixir標準のTaskRunner)
    - CFn

## 14:00〜14:45 Nature Remoの裏側 ~ AWSとWeb技術をIoTの世界でフル活用する
* 2年で10万台突破
* Remo E
  - スマートエネルギーハブ
  - ECHONET Liteプロトコルを利用
    - スマートメータとHEMSを綱不標準プロロコル
  - スマートメーターやソーラーパネルｍ蓄電池の操作や情報収集
* UDPホールパンチング
* ecspresso
  - ecs-deployから乗り換え
  - 既存のタスク定義を利用できる
* Consul
  - CloudMapに乗り換えていきたい
* Log
  - zap で CloudWatch Logs に送信→高い
  - firehoseでS3に直接
* IoT,MLサービス
  - 無理して使う必要はないが、引き出しを広げておきたい
* 内容は、[golang.tokyo#26](https://umemak.github.io/blog/posts/2019/09/25_golang_tokyo_26/)とほぼ同じだった。

## 15:00〜15:45 DRIVE CHARTにおけるSagemaker migration


## 16:00〜16:45 AWS DeepRacerリーグに個人参加して入賞、上位をキープし続けている手法


## 17:00〜17:45 AppSync ユースケース/デザインパターン
