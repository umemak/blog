<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Hugo on umemak</title><link>https://umemak.github.io/blog/tags/hugo/</link><description>Recent content in Hugo on umemak</description><generator>Hugo</generator><language>ja-jp</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 10 May 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://umemak.github.io/blog/tags/hugo/index.xml" rel="self" type="application/rss+xml"/><item><title>harbor試してみた</title><link>https://umemak.github.io/blog/posts/2022/05/10_harbor/</link><pubDate>Tue, 10 May 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/05/10_harbor/</guid><description>&lt;p>ローカルサーバーでやってみた。&lt;/p>
&lt;p>検索は問題なく導入できて動作も問題なさそうだけど、見た目がだいぶ印象変わってしまうのがちょっと悩ましい。&lt;/p>
&lt;p>あと、一覧で日付が出てるのに個別ページに遷移すると日付が出ないのはなぜだろう。デモサイトでは個別ページにも出てるのに。&lt;/p>
&lt;p>乗り換えはいったん保留。&lt;/p></description></item><item><title>Hugoテーマharbor</title><link>https://umemak.github.io/blog/posts/2022/05/09_harbor/</link><pubDate>Mon, 09 May 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/05/09_harbor/</guid><description>&lt;p>&lt;a href="https://github.com/matsuyoshi30/harbor">matsuyoshi30/harbor: Simple and minimal personal blog theme.&lt;/a>&lt;/p>
&lt;p>このテーマ、全文検索対応しているようなので気になっている。&lt;/p>
&lt;p>検索に使われているのは&lt;a href="https://github.com/nextapps-de/flexsearch">nextapps-de/flexsearch: Next-Generation full text search library for Browser and Node.js&lt;/a>らしい。&lt;/p>
&lt;p>flexsearch.jsは&lt;a href="https://d3.haro.jp/docs/2021/flexsearch/">日本語だと半角英数字が検索できない&lt;/a>とかあるみたいだけど、簡単に使うだけなら問題ないのではないか、問題あったとしても先人の工夫で乗り切れるのではないか。&lt;/p></description></item><item><title>HugoにAlgoliaを導入してみる</title><link>https://umemak.github.io/blog/posts/2022/04/23_hugo_search/</link><pubDate>Sat, 23 Apr 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/04/23_hugo_search/</guid><description>&lt;p>&lt;a href="https://blog.piyo.tech/posts/2018-04-08-hugo-search-page/">Algoliaを使ってブログに全文検索をつける（検索ページ編） - PIYO - Tech &amp;amp; Life -&lt;/a> を見ながらやって、何とか検索できるのはできたんだけど、色々混ぜて試行錯誤した結果、よくわからないものになってしまっている現状。&lt;/p>
&lt;p>なおGitHub Actionsへの組み込みはまだ。&lt;/p></description></item><item><title>HugoにAlgoliaを導入してみる</title><link>https://umemak.github.io/blog/posts/2022/04/22_hugo_search/</link><pubDate>Fri, 22 Apr 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/04/22_hugo_search/</guid><description>&lt;p>&lt;a href="https://ottan.xyz/posts/2021/07/947231059/">Hugo + Algolia + Instantsearch.jsで静的サイトに全文検索を導入 - OTTANXYZ&lt;/a>を見ながらやってみた。&lt;/p>
&lt;p>とりあえずローカルでできることを確認してから、GitHub Actionsに組み込もうかと。&lt;/p>
&lt;p>で、上記サイトは設定ファイルがYAMLだったのでTOMLで書くところで躓いた。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-toml" data-lang="toml">&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#a6e22e">outputFormats&lt;/span>.&lt;span style="color:#a6e22e">Algolia&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">baseName&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;algolia&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">isPlainText&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">mediaType&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;application/json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">notAlternative&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>これで動いた。&lt;/p></description></item><item><title>Hugoのblogに検索機能を付けたい</title><link>https://umemak.github.io/blog/posts/2022/04/17_hugo_search/</link><pubDate>Sun, 17 Apr 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/04/17_hugo_search/</guid><description>&lt;p>&lt;a href="https://gohugo.io/tools/search/">公式&lt;/a>にいくつかやり方が紹介されている。&lt;/p>
&lt;p>公式自体は&lt;a href="https://www.algolia.com/">Algolia&lt;/a>を使っているので、無料枠もあるみたいだしAlgolia使ってみようかな。&lt;/p></description></item><item><title>Hugoのバージョンアップ</title><link>https://umemak.github.io/blog/posts/2020/06/22_update_hugo/</link><pubDate>Mon, 22 Jun 2020 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2020/06/22_update_hugo/</guid><description>&lt;p>しばらく追っていなかったら、Hugoのバージョンが結構上がっていたので、最新を使ってみることにした。&lt;/p>
&lt;p>とはいえ、デプロイにGitHub Actionsを使っているので、設定ファイルの更新だけで完了した。&lt;/p>
&lt;p>&lt;a href="https://github.com/umemak/blog/compare/3c9b96d8e81049b07911da9a31030e3d6f045397...649f6f3abb39fd48dff5d05236448156ccc12b22">差分&lt;/a>&lt;/p>
&lt;p>Hugoのバージョン変更より、ついでに更新したactionsの変更で躓いてしまった。
今は&lt;code>DEPLOY_KEY&lt;/code>を作る必要はなく、自動的に&lt;code>GITHUB_TOKEN&lt;/code>が作られるようになっていた。&lt;/p></description></item><item><title>パイプラインをGitHub Actionsに移行</title><link>https://umemak.github.io/blog/posts/2019/11/12_github_actions/</link><pubDate>Tue, 12 Nov 2019 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2019/11/12_github_actions/</guid><description>&lt;p>AWS Amplifyとか、Netlify試したりしていたら、Azure Pipelineでのこのページのビルドが通らなくなってしまったので、設定し直しのついでにGitHub Actionsに移行してみた。&lt;/p>
&lt;p>手順は&lt;a href="https://qiita.com/peaceiris/items/d401f2e5724fdcb0759d">Qiitaの記事&lt;/a>を見ながらそのままで。&lt;/p>
&lt;p>思ったより簡単にできてしまって、最初からこれでよかった感が。。&lt;/p></description></item><item><title>hugoのテーマを変えてみる</title><link>https://umemak.github.io/blog/posts/2019/09/01_change_hugo_theme/</link><pubDate>Sun, 01 Sep 2019 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2019/09/01_change_hugo_theme/</guid><description>&lt;ul>
&lt;li>&lt;a href="https://themes.gohugo.io/hermit/">Hermit&lt;/a>から&lt;a href="https://themes.gohugo.io/inkblotty/">Inkblotty&lt;/a>へ。&lt;/li>
&lt;li>ちょっと使い勝手が合わないところがあったので&lt;a href="https://github.com/umemak/inkblotty">fork&lt;/a>して改造。&lt;/li>
&lt;/ul>
&lt;h2 id="変更したところ">変更したところ&lt;/h2>
&lt;ul>
&lt;li>カテゴリとアーカイブ使ってないのにサイドバーに表示されているのを非表示に&lt;/li>
&lt;/ul>
&lt;h2 id="ハマったところ">ハマったところ&lt;/h2>
&lt;ul>
&lt;li>最近の投稿が表示されないのは&lt;code>postSections&lt;/code>パラメータが違っていた&lt;/li>
&lt;li>config.toml で設定したら表示された&lt;/li>
&lt;/ul></description></item><item><title>Azure DevOpsでCI</title><link>https://umemak.github.io/blog/posts/2019/08/21_azure_devops/</link><pubDate>Wed, 21 Aug 2019 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2019/08/21_azure_devops/</guid><description>&lt;ul>
&lt;li>Hugoの実行とPUSHをやってもらう&lt;/li>
&lt;li>&lt;a href="https://blog.kaikeru.com/post/20181228-freestaticsite/">https://blog.kaikeru.com/post/20181228-freestaticsite/&lt;/a> を参考に設定。&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/ja-jp/azure/devops/pipelines/build/triggers?view=tfs-2018&amp;amp;tabs=yaml#ci-triggers">CIのスキップ&lt;/a>を念の為追加&lt;/li>
&lt;li>&lt;a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&amp;amp;tabs=yaml%2Cbatch#secret-variables">variableの設定&lt;/a>がわかりにくかった。
&lt;ul>
&lt;li>ちゃんと読めば書いてある。&lt;/li>
&lt;li>Pipeline編集画面の右上から。&lt;/li>
&lt;li>AWS Secrets Manager的なサービスがあるのかと探し回ってしまった。。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Hugoの導入</title><link>https://umemak.github.io/blog/posts/2019/08/21_hugo/</link><pubDate>Wed, 21 Aug 2019 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2019/08/21_hugo/</guid><description>&lt;ul>
&lt;li>やってみよう&lt;/li>
&lt;/ul>
&lt;h2 id="インストール">インストール&lt;/h2>
&lt;p>&lt;a href="https://gohugo.io/getting-started/installing/#linux">https://gohugo.io/getting-started/installing/#linux&lt;/a> を見たら apt でいけるらしいので&lt;/p>
&lt;pre tabindex="0">&lt;code>$ apt install hugo
$ hugo version
Hugo Static Site Generator v0.18.1 BuildDate: 2016-12-31T01:01:10+09:00
&lt;/code>&lt;/pre>&lt;p>v0.18.1 ってだいぶ古い。。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ sudo apt remove hugo
$ wget https://github.com/gohugoio/hugo/releases/download/v0.57.2/hugo_extended_0.57.2_Linux-64bit.tar.gz
$ sha256sum hugo_extended_0.57.2_Linux-64bit.tar.gz 
f4ce91d6909d489fe5461633f6b6bd689ed14c9e06b1b7af110024420aa8fd91 hugo_extended_0.57.2_Linux-64bit.tar.gz
$ tar zxvf hugo_extended_0.57.2_Linux-64bit.tar.gz 
LICENSE
README.md
hugo
$ sudo cp hugo /usr/local/bin/
$ hugo version
Hugo Static Site Generator v0.57.2-A849CB2D/extended linux/amd64 BuildDate: 2019-08-17T17:57:54Z
&lt;/code>&lt;/pre>&lt;p>OK。&lt;/p>
&lt;h2 id="サイト作成">サイト作成&lt;/h2>
&lt;pre tabindex="0">&lt;code>$ hugo new site blog
&lt;/code>&lt;/pre>&lt;h2 id="テーマ追加">テーマ追加&lt;/h2>
&lt;pre tabindex="0">&lt;code>$ cd blog
$ git clone https://github.com/Track3/hermit.git themes/hermit
$ echo &amp;#39;theme = &amp;#34;hermit&amp;#34;&amp;#39; &amp;gt;&amp;gt; config.toml
&lt;/code>&lt;/pre>&lt;h2 id="コンテンツ追加">コンテンツ追加&lt;/h2>
&lt;pre tabindex="0">&lt;code>$ hugo new posts/my-first-post.md
&lt;/code>&lt;/pre>&lt;h2 id="表示確認">表示確認&lt;/h2>
&lt;pre tabindex="0">&lt;code>$ hugo server -D
Building sites … ERROR 2019/08/21 11:29:11 render of &amp;#34;section&amp;#34; failed: execute of template failed: template: _default/list.html:21:50: executing &amp;#34;main&amp;#34; at &amp;lt;.Site.Params.dateformshort&amp;gt;: invalid value; expected string
ERROR 2019/08/21 11:29:11 render of &amp;#34;taxonomyTerm&amp;#34; failed: execute of template failed: template: _default/list.html:21:50: executing &amp;#34;main&amp;#34; at &amp;lt;.Site.Params.dateformshort&amp;gt;: invalid value; expected string
ERROR 2019/08/21 11:29:11 render of &amp;#34;taxonomy&amp;#34; failed: execute of template failed: template: _default/list.html:21:50: executing &amp;#34;main&amp;#34; at &amp;lt;.Site.Params.dateformshort&amp;gt;: invalid value; expected string
Total in 167 ms
Error: Error building site: failed to render pages: render of &amp;#34;page&amp;#34; failed: &amp;#34;/home/umemak/blog/themes/hermit/layouts/posts/single.html:22:54&amp;#34;: execute of template failed: template: posts/single.html:22:54: executing &amp;#34;main&amp;#34; at &amp;lt;.Site.Params.dateform&amp;gt;: invalid value; expected string
&lt;/code>&lt;/pre>&lt;p>なんかエラーでた。。
&lt;code>hermit/exampleSite/config.toml&lt;/code>を&lt;code>config.toml&lt;/code>にコピーして解消。
&lt;code>[params]&lt;/code>セクションがないとだめらしい。&lt;/p></description></item></channel></rss>