<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>go on umemak</title><link>https://umemak.github.io/blog/tags/go/</link><description>Recent content in go on umemak</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 22 Nov 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://umemak.github.io/blog/tags/go/index.xml" rel="self" type="application/rss+xml"/><item><title>runnでgRPCのテスト3</title><link>https://umemak.github.io/blog/posts/2022/11/22_runn/</link><pubDate>Tue, 22 Nov 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/11/22_runn/</guid><description>runnでDBの操作もできるのだけど、BINARY型のカラムがあるテーブルだとうまく動かない（気がする）。 深く考えずにCHAR型に変更したら通ったので、おそらくBINARY型が原因だったと思う。 時間ができたら検証してみたい。</description></item><item><title>runnでgRPCのテスト2</title><link>https://umemak.github.io/blog/posts/2022/11/18_runn/</link><pubDate>Fri, 18 Nov 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/11/18_runn/</guid><description>runnのコマンドライン実行でうまく動かない件、オプション--grpc-no-tlsを指定したら解消した。 デバッグ用に詳細オプションないかなーってコマンドラインヘルプ見ていて見つけた。 マニュアルはちゃんと読みましょう（今年何度目かの反省</description></item><item><title>runnでgRPCのテスト</title><link>https://umemak.github.io/blog/posts/2022/11/17_runn/</link><pubDate>Thu, 17 Nov 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/11/17_runn/</guid><description>gRPCサーバーをテストするのに、fullstorydev/grpcurl: Like cURL, but for gRPC: Command-line tool for interacting with gRPC serversを使っていたのだけど、自動化するのに良いものはないかと探して、k1LoW/runn: runn is a package/tool for running operations following a scenario.を試してみた。 go testから使うのは何となくできたような気がするけど</description></item><item><title>SQLBoilerで論理削除の復旧</title><link>https://umemak.github.io/blog/posts/2022/11/14_sqlboiler_undelete/</link><pubDate>Mon, 14 Nov 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/11/14_sqlboiler_undelete/</guid><description>SQLBoilerはDeleteするときに論理削除が使える。 詳細は【Go】sqlboilerで論理削除を実装する | ISSUEが詳しい。 論理削除のときはdeleted_atカラムがセットされる。 で、そのときupdated_atは更新されない。 論理削除した行を元に戻したいとき、deleted_atにnu</description></item><item><title>SQLBoiler</title><link>https://umemak.github.io/blog/posts/2022/11/11_sqlboiler/</link><pubDate>Fri, 11 Nov 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/11/11_sqlboiler/</guid><description>SQLBoilerを使うロジックをDATA-DOG/go-sqlmock: Sql mock driver for golang to test database interactionsでテストしようとしてハマった。 使わない便利機能は複雑さが増すだけで良いことないな。。 使いこなせば、それなしとか考えられないんだろうけど、つらい。</description></item><item><title>SQLBoiler</title><link>https://umemak.github.io/blog/posts/2022/11/07_sqlboiler/</link><pubDate>Mon, 07 Nov 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/11/07_sqlboiler/</guid><description>volatiletech/sqlboiler: Generate a Go ORM tailored to your database schema.を少し触ってみた。 普段はkyleconroy/sqlc: Generate type-safe code from SQLをよく使っているのだけれど、あらかじめSQLを書かなくて良いのは楽。 だけど結局DB操作するときには対象のレコードを指定するのに組み立てないといけないので、一長一短。 手段を一つしかもっていないと、それ</description></item><item><title>OpenAPIで生成したサーバーのテスト</title><link>https://umemak.github.io/blog/posts/2022/09/16_openapi_test/</link><pubDate>Fri, 16 Sep 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/09/16_openapi_test/</guid><description>よくわからない。 ググるとhttptest使う例が良く出てくるけど、型が合わなくて組み立てられない。 仕方ないので、APIサーバー起動してhttp.NewRequestWithContextで叩いて結果を見るという、E2Eっぽいテストに落ち着きそう。</description></item><item><title>chiでproxy</title><link>https://umemak.github.io/blog/posts/2022/09/15_chi_proxy/</link><pubDate>Thu, 15 Sep 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/09/15_chi_proxy/</guid><description>grpc-gatewayでgRPCとREST両対応のサーバを作る | フューチャー技術ブログのサンプルでmux.Handle(&amp;quot;/docs/&amp;quot;, docsProxy)となっているところを、go-chi/chi: lightweight, idiomatic and composable router for building Go HTTP servicesを使っているのでrouter.Handle</description></item><item><title>proto</title><link>https://umemak.github.io/blog/posts/2022/09/14_proto/</link><pubDate>Wed, 14 Sep 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/09/14_proto/</guid><description>昨日のエラーは、grpc-ecosystem/grpc-gateway: gRPC to JSON proxy generator following the gRPC HTTP specにあるようにbuf.yamlに deps: - buf.build/googleapis/googleapis を追記してbuf mod updateを実行したら直ったような気がする。 気がする、というのは他にもprotoファイルをダウンロードしてきたりとかいろいろやっていて何が決定打だ</description></item><item><title>proto</title><link>https://umemak.github.io/blog/posts/2022/09/13_proto/</link><pubDate>Tue, 13 Sep 2022 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2022/09/13_proto/</guid><description>proto定義何もわからない。。 REST用のパスを定義するために option (google.api.http) = { get : &amp;quot;/example-messages/{id}&amp;quot; }; といった定義が必要で、これを使うには import &amp;quot;google/api/annotations.proto&amp;quot;; が必要らしいという理解なのだけど、これをビルドしようとすると event.proto:6:1: Import &amp;quot;google/api/annotations.proto&amp;quot; was not found or had errors. というエラーが出てしまう。 こういうところで躓くの嫌すぎる。</description></item></channel></rss>