<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>umemak</title><link>https://umemak.github.io/blog/</link><description>Recent content on umemak</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 21 Nov 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://umemak.github.io/blog/index.xml" rel="self" type="application/rss+xml"/><item><title>DockerでNGINXを動かすとClientIPが取れない</title><link>https://umemak.github.io/blog/posts/2023/11/21_docker_nginx/</link><pubDate>Tue, 21 Nov 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/11/21_docker_nginx/</guid><description>SvelteKitアプリでアクセス元IPアドレスを見て処理を分けたかった。 ローカル環境ではHandleでevent.getClientAddress()したら取れていた。 SvelteKitはログが寂しいので、手前にNGINXを置いてアクセスログを詳細にとれるようにしてみた。 ローカルにNGINXインス</description></item><item><title>CodeRabbit</title><link>https://umemak.github.io/blog/posts/2023/11/18_coderabbit/</link><pubDate>Sat, 18 Nov 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/11/18_coderabbit/</guid><description>特に個人開発者向け！CodeRabbit(自動レビューツール)を使えばコードの健康まで得られることに気づいた話を見て良さそうだったので試してみた。 CodeRabbit: AI-powered Code Reviews 最初、PRをトリガーに発動するのに気づかなくて、Issueが上がってくるのを待ってしまった。 レビューコメントが英語だったので、「日本語でお願いしま</description></item><item><title>LambdaとPrisma</title><link>https://umemak.github.io/blog/posts/2023/11/02_lambda_prisma/</link><pubDate>Thu, 02 Nov 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/11/02_lambda_prisma/</guid><description>昨日、SSTでデプロイしてエラーになったので、yarbsemaj/sveltekit-adapter-lambda: An adapter to build a SvelteKit app into a lambda ready for deployment with lambda proxy via the Serverless Framework.を試してみた。 結果としては、やはりPrismaのエラーで落ちていた。 ひとまずLambda諦めて動くものを作るのを優先しよう。</description></item><item><title>SST入門</title><link>https://umemak.github.io/blog/posts/2023/11/01_sst/</link><pubDate>Wed, 01 Nov 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/11/01_sst/</guid><description>SvelteKitをAWSのLambdaで動かす方法を探していて、ゼロコンフィグデプロイ • Docs • SvelteKitでUse SvelteKit with SST | SSTが紹介されていた。 SSTってSega Sound Teamしか知らないけど、Serverless Stackの略らしい（Tはどこから？）。 で、ドキュメントに沿って動かしてみたら、い</description></item><item><title>pnpm入門</title><link>https://umemak.github.io/blog/posts/2023/10/29_pnpm/</link><pubDate>Sun, 29 Oct 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/10/29_pnpm/</guid><description>SvelteKit の JWT を使用した認証と認可の処理 - Okupterを試してみようと思ったところ、pnpmが何か気になったので調べた。 Fast, disk space efficient package manager | pnpm pnpm の特徴によると、npmの速いやつという理解。 インストールもnpmが入っていればnpm install -g pnpmで使えるようになる。</description></item><item><title>FastAPI入門2</title><link>https://umemak.github.io/blog/posts/2023/10/10_fastapi/</link><pubDate>Tue, 10 Oct 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/10/10_fastapi/</guid><description>昨日の続き。テストを流した時のエラーは、参考にしたサイトのものと一部バージョンが変わっているのが原因らしく。 pytest-asyncio のモードのデフォルト値が変わったよ＆出戻りのご連絡｜基幹システムのクラウド移行・構築・導入支援のBeeX を参考に@pytest.fixtureを@pytest_asyncio.fixture</description></item><item><title>FastAPI入門</title><link>https://umemak.github.io/blog/posts/2023/10/09_fastapi/</link><pubDate>Mon, 09 Oct 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/10/09_fastapi/</guid><description>FastAPI入門をやってみた。 特にひっかかることなく進めたが、最後のテストがPASSしない。 $ docker-compose run --entrypoint &amp;#34;poetry run pytest&amp;#34; demo-app [+] Building 0.0s (0/0) docker:default [+] Building 0.0s (0/0) docker:default ======================================================= test session starts ========================================================platform linux -- Python 3.9.17, pytest-7.4.2, pluggy-1.3.0 rootdir: /src plugins: anyio-3.7.1, asyncio-0.21.1 asyncio: mode=strict collected 2 items tests/test_main.py FF [100%] ============================================================= FAILURES ============================================================= _______________________________________________________ test_create_and_read _______________________________________________________ async_client = &amp;lt;async_generator object async_client at 0x7f8d3374dca0&amp;gt; @pytest.mark.asyncio async def test_create_and_read(async_client): &amp;gt; response = await async_client.post(&amp;#34;/tasks&amp;#34;, json={&amp;#34;title&amp;#34;: &amp;#34;テストタスク&amp;#34;}) E AttributeError: &amp;#39;async_generator&amp;#39; object has no attribute &amp;#39;post&amp;#39; tests/test_main.py:41: AttributeError __________________________________________________________ test_done_flag __________________________________________________________ async_client = &amp;lt;async_generator object async_client at 0x7f8d3374ddc0&amp;gt;</description></item><item><title>Cloud Functionsのデプロイでエラー</title><link>https://umemak.github.io/blog/posts/2023/10/08_cloud_function_error/</link><pubDate>Sun, 08 Oct 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/10/08_cloud_function_error/</guid><description>久しぶりにデプロイ実行したら、エラーで中断してしまった。 エラーメッセージを見ると、いっこ前のイメージが見つからないみたいなやつで（コピペ紛失）、そういえばコスト削減しようとして、Storageのライフサイクルを1日とか最短にしたのを思い出した。 Cloud Functions のトラブルシューティング | Google Cloud Functions に関するドキュメント</description></item><item><title>OpenAPIのyamlを結合する</title><link>https://umemak.github.io/blog/posts/2023/09/29_openapi_bundle/</link><pubDate>Fri, 29 Sep 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/09/29_openapi_bundle/</guid><description>一つのopenapi.yamlに定義を書いていると、ファイルが肥大化して管理というか編集が大変になる。 で、分割するには$refを使って相対ファイル指定することで、外部ファイルを参照できる。 ただ、Swagger UIでダウンロードしようとすると、ルートのファイルしか取れない（相対ファイルを辿ればとれるだ</description></item><item><title>Windowsにazコマンドのインストール</title><link>https://umemak.github.io/blog/posts/2023/08/02_az_windows/</link><pubDate>Wed, 02 Aug 2023 00:00:00 +0000</pubDate><guid>https://umemak.github.io/blog/posts/2023/08/02_az_windows/</guid><description>Azure CLI をインストールする方法 | Microsoft Learnからインストーラーをダウンロードしてインストールしたら、32bit版で実行するたびにメッセージが出て気になったので、アンインストールして別の方法を探った。 Support Azure CLI 64-bit on Windows · Issue #18766 · Azure/azure-cliでpip使ってインストールしたら回避できると書かれていた</description></item></channel></rss>